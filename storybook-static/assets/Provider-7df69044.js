import{r as c,R as p}from"./index-c013ead5.js";import{p as S,R as x}from"./appointmentSlice-91d9bc63.js";function y(){const s=S();let r=null,n=null;return{clear(){r=null,n=null},notify(){s(()=>{let e=r;for(;e;)e.callback(),e=e.next})},get(){let e=[],i=r;for(;i;)e.push(i),i=i.next;return e},subscribe(e){let i=!0,t=n={callback:e,next:null,prev:n};return t.prev?t.prev.next=t:r=t,function(){!i||r===null||(i=!1,t.next?t.next.prev=t.prev:n=t.prev,t.prev?t.prev.next=t.next:r=t.next)}}}}const a={notify(){},get:()=>[]};function g(s,r){let n,e=a;function i(d){return f(),e.subscribe(d)}function t(){e.notify()}function o(){l.onStateChange&&l.onStateChange()}function u(){return!!n}function f(){n||(n=r?r.addNestedSub(o):s.subscribe(o),e=y())}function b(){n&&(n(),n=void 0,e.clear(),e=a)}const l={addNestedSub:i,notifyNestedSubs:t,handleChangeWrapper:o,isSubscribed:u,trySubscribe:f,tryUnsubscribe:b,getListeners:()=>e};return l}const h=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",m=h?c.useLayoutEffect:c.useEffect;function C({store:s,context:r,children:n,serverState:e}){const i=c.useMemo(()=>{const u=g(s);return{store:s,subscription:u,getServerState:e?()=>e:void 0}},[s,e]),t=c.useMemo(()=>s.getState(),[s]);m(()=>{const{subscription:u}=i;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),t!==s.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[i,t]);const o=r||x;return p.createElement(o.Provider,{value:i},n)}export{C as P};
//# sourceMappingURL=Provider-7df69044.js.map
