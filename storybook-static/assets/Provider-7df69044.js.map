{"version":3,"file":"Provider-7df69044.js","sources":["../../node_modules/react-redux/es/utils/Subscription.js","../../node_modules/react-redux/es/utils/useIsomorphicLayoutEffect.js","../../node_modules/react-redux/es/components/Provider.js"],"sourcesContent":["import { getBatch } from './batch'; // encapsulates the subscription logic for connecting a component to the redux store, as\n// well as nesting subscriptions of descendant components, so that we can ensure the\n// ancestor components re-render before descendants\n\nfunction createListenerCollection() {\n  const batch = getBatch();\n  let first = null;\n  let last = null;\n  return {\n    clear() {\n      first = null;\n      last = null;\n    },\n\n    notify() {\n      batch(() => {\n        let listener = first;\n\n        while (listener) {\n          listener.callback();\n          listener = listener.next;\n        }\n      });\n    },\n\n    get() {\n      let listeners = [];\n      let listener = first;\n\n      while (listener) {\n        listeners.push(listener);\n        listener = listener.next;\n      }\n\n      return listeners;\n    },\n\n    subscribe(callback) {\n      let isSubscribed = true;\n      let listener = last = {\n        callback,\n        next: null,\n        prev: last\n      };\n\n      if (listener.prev) {\n        listener.prev.next = listener;\n      } else {\n        first = listener;\n      }\n\n      return function unsubscribe() {\n        if (!isSubscribed || first === null) return;\n        isSubscribed = false;\n\n        if (listener.next) {\n          listener.next.prev = listener.prev;\n        } else {\n          last = listener.prev;\n        }\n\n        if (listener.prev) {\n          listener.prev.next = listener.next;\n        } else {\n          first = listener.next;\n        }\n      };\n    }\n\n  };\n}\n\nconst nullListeners = {\n  notify() {},\n\n  get: () => []\n};\nexport function createSubscription(store, parentSub) {\n  let unsubscribe;\n  let listeners = nullListeners;\n\n  function addNestedSub(listener) {\n    trySubscribe();\n    return listeners.subscribe(listener);\n  }\n\n  function notifyNestedSubs() {\n    listeners.notify();\n  }\n\n  function handleChangeWrapper() {\n    if (subscription.onStateChange) {\n      subscription.onStateChange();\n    }\n  }\n\n  function isSubscribed() {\n    return Boolean(unsubscribe);\n  }\n\n  function trySubscribe() {\n    if (!unsubscribe) {\n      unsubscribe = parentSub ? parentSub.addNestedSub(handleChangeWrapper) : store.subscribe(handleChangeWrapper);\n      listeners = createListenerCollection();\n    }\n  }\n\n  function tryUnsubscribe() {\n    if (unsubscribe) {\n      unsubscribe();\n      unsubscribe = undefined;\n      listeners.clear();\n      listeners = nullListeners;\n    }\n  }\n\n  const subscription = {\n    addNestedSub,\n    notifyNestedSubs,\n    handleChangeWrapper,\n    isSubscribed,\n    trySubscribe,\n    tryUnsubscribe,\n    getListeners: () => listeners\n  };\n  return subscription;\n}","import { useEffect, useLayoutEffect } from 'react'; // React currently throws a warning when using useLayoutEffect on the server.\n// To get around it, we can conditionally useEffect on the server (no-op) and\n// useLayoutEffect in the browser. We need useLayoutEffect to ensure the store\n// subscription callback always has the selector from the latest render commit\n// available, otherwise a store update may happen between render and the effect,\n// which may cause missed updates; we also must ensure the store subscription\n// is created synchronously, otherwise a store update may occur before the\n// subscription is created and an inconsistent state may be observed\n// Matches logic in React's `shared/ExecutionEnvironment` file\n\nexport const canUseDOM = !!(typeof window !== 'undefined' && typeof window.document !== 'undefined' && typeof window.document.createElement !== 'undefined');\nexport const useIsomorphicLayoutEffect = canUseDOM ? useLayoutEffect : useEffect;","import React, { useMemo } from 'react';\nimport { ReactReduxContext } from './Context';\nimport { createSubscription } from '../utils/Subscription';\nimport { useIsomorphicLayoutEffect } from '../utils/useIsomorphicLayoutEffect';\n\nfunction Provider({\n  store,\n  context,\n  children,\n  serverState\n}) {\n  const contextValue = useMemo(() => {\n    const subscription = createSubscription(store);\n    return {\n      store,\n      subscription,\n      getServerState: serverState ? () => serverState : undefined\n    };\n  }, [store, serverState]);\n  const previousState = useMemo(() => store.getState(), [store]);\n  useIsomorphicLayoutEffect(() => {\n    const {\n      subscription\n    } = contextValue;\n    subscription.onStateChange = subscription.notifyNestedSubs;\n    subscription.trySubscribe();\n\n    if (previousState !== store.getState()) {\n      subscription.notifyNestedSubs();\n    }\n\n    return () => {\n      subscription.tryUnsubscribe();\n      subscription.onStateChange = undefined;\n    };\n  }, [contextValue, previousState]);\n  const Context = context || ReactReduxContext; // @ts-ignore 'AnyAction' is assignable to the constraint of type 'A', but 'A' could be instantiated with a different subtype\n\n  return /*#__PURE__*/React.createElement(Context.Provider, {\n    value: contextValue\n  }, children);\n}\n\nexport default Provider;"],"names":["createListenerCollection","batch","getBatch","first","last","listener","listeners","callback","isSubscribed","nullListeners","createSubscription","store","parentSub","unsubscribe","addNestedSub","trySubscribe","notifyNestedSubs","handleChangeWrapper","subscription","tryUnsubscribe","canUseDOM","useIsomorphicLayoutEffect","useLayoutEffect","useEffect","Provider","context","children","serverState","contextValue","useMemo","previousState","Context","ReactReduxContext","React"],"mappings":"yGAIA,SAASA,GAA2B,CAClC,MAAMC,EAAQC,IACd,IAAIC,EAAQ,KACRC,EAAO,KACX,MAAO,CACL,OAAQ,CACND,EAAQ,KACRC,EAAO,IACR,EAED,QAAS,CACPH,EAAM,IAAM,CACV,IAAII,EAAWF,EAEf,KAAOE,GACLA,EAAS,SAAQ,EACjBA,EAAWA,EAAS,IAE9B,CAAO,CACF,EAED,KAAM,CACJ,IAAIC,EAAY,CAAA,EACZD,EAAWF,EAEf,KAAOE,GACLC,EAAU,KAAKD,CAAQ,EACvBA,EAAWA,EAAS,KAGtB,OAAOC,CACR,EAED,UAAUC,EAAU,CAClB,IAAIC,EAAe,GACfH,EAAWD,EAAO,CACpB,SAAAG,EACA,KAAM,KACN,KAAMH,CACd,EAEM,OAAIC,EAAS,KACXA,EAAS,KAAK,KAAOA,EAErBF,EAAQE,EAGH,UAAuB,CACxB,CAACG,GAAgBL,IAAU,OAC/BK,EAAe,GAEXH,EAAS,KACXA,EAAS,KAAK,KAAOA,EAAS,KAE9BD,EAAOC,EAAS,KAGdA,EAAS,KACXA,EAAS,KAAK,KAAOA,EAAS,KAE9BF,EAAQE,EAAS,KAE3B,CACK,CAEL,CACA,CAEA,MAAMI,EAAgB,CACpB,QAAS,CAAE,EAEX,IAAK,IAAM,CAAE,CACf,EACO,SAASC,EAAmBC,EAAOC,EAAW,CACnD,IAAIC,EACAP,EAAYG,EAEhB,SAASK,EAAaT,EAAU,CAC9B,OAAAU,IACOT,EAAU,UAAUD,CAAQ,CACpC,CAED,SAASW,GAAmB,CAC1BV,EAAU,OAAM,CACjB,CAED,SAASW,GAAsB,CACzBC,EAAa,eACfA,EAAa,cAAa,CAE7B,CAED,SAASV,GAAe,CACtB,MAAO,EAAQK,CAChB,CAED,SAASE,GAAe,CACjBF,IACHA,EAAcD,EAAYA,EAAU,aAAaK,CAAmB,EAAIN,EAAM,UAAUM,CAAmB,EAC3GX,EAAYN,EAAwB,EAEvC,CAED,SAASmB,GAAiB,CACpBN,IACFA,IACAA,EAAc,OACdP,EAAU,MAAK,EACfA,EAAYG,EAEf,CAED,MAAMS,EAAe,CACnB,aAAAJ,EACA,iBAAAE,EACA,oBAAAC,EACA,aAAAT,EACA,aAAAO,EACA,eAAAI,EACA,aAAc,IAAMb,CACxB,EACE,OAAOY,CACT,CCpHO,MAAME,EAAe,OAAO,OAAW,KAAe,OAAO,OAAO,SAAa,KAAe,OAAO,OAAO,SAAS,cAAkB,IACnIC,EAA4BD,EAAYE,EAAAA,gBAAkBC,EAAS,UCNhF,SAASC,EAAS,CAChB,MAAAb,EACA,QAAAc,EACA,SAAAC,EACA,YAAAC,CACF,EAAG,CACD,MAAMC,EAAeC,EAAAA,QAAQ,IAAM,CACjC,MAAMX,EAAeR,EAAmBC,CAAK,EAC7C,MAAO,CACL,MAAAA,EACA,aAAAO,EACA,eAAgBS,EAAc,IAAMA,EAAc,MACxD,CACA,EAAK,CAAChB,EAAOgB,CAAW,CAAC,EACjBG,EAAgBD,EAAAA,QAAQ,IAAMlB,EAAM,WAAY,CAACA,CAAK,CAAC,EAC7DU,EAA0B,IAAM,CAC9B,KAAM,CACJ,aAAAH,CACD,EAAGU,EACJ,OAAAV,EAAa,cAAgBA,EAAa,iBAC1CA,EAAa,aAAY,EAErBY,IAAkBnB,EAAM,YAC1BO,EAAa,iBAAgB,EAGxB,IAAM,CACXA,EAAa,eAAc,EAC3BA,EAAa,cAAgB,MACnC,CACA,EAAK,CAACU,EAAcE,CAAa,CAAC,EAChC,MAAMC,EAAUN,GAAWO,EAE3B,OAAoBC,EAAM,cAAcF,EAAQ,SAAU,CACxD,MAAOH,CACR,EAAEF,CAAQ,CACb","x_google_ignoreList":[0,1,2]}